{"ast":null,"code":"var _jsxFileName = \"D:\\\\BKU\\\\211\\\\DCLV_v1\\\\demo_lv_django_reactjs\\\\fontend\\\\views\\\\src\\\\modules\\\\product\\\\product.js\",\n    _s = $RefreshSig$();\n\nimport Nav from '../../component/nav';\nimport '../../component/css/product.css';\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport { validateBody } from '../../middleware/validateBody.middleware';\nimport { ProductSchema } from '../../DTO/product.dto';\nimport ListProduct from './ListProduct';\nimport UpdateModal from './UpdateModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Products() {\n  _s();\n\n  var id_delete = -1;\n  var id_update = -1; // const [List_product, setListProduct] = useState([]);\n\n  const [product, setProduct] = useState([]);\n  const [updateProduct, setupdateProduct] = useState({});\n  useEffect(() => {\n    axios.get('http://127.0.0.1:8000/products/').then(res => {\n      setProduct(res.data);\n    }).catch(err => console.log(err));\n  }, []); // window.onload = function() {\n  //   loadRecord();\n  // };\n\n  function insertProduct() {\n    try {\n      const inputProduct = {\n        name: document.getElementById('name').value,\n        img: document.getElementById('img').value,\n        price: document.getElementById('price').value\n      };\n      const checkInput = validateBody(ProductSchema, inputProduct);\n\n      if (checkInput.status === \"fail\") {\n        alert(checkInput.message);\n        return;\n      }\n\n      axios.post('http://127.0.0.1:8000/products/', inputProduct).then(data => {\n        document.getElementById(\"insertproduct\").reset();\n        const idproduct = product.length + 1;\n        setProduct([...product, {\n          id: idproduct,\n          ...inputProduct\n        }]);\n        alert(\"Insert successfullly\");\n      }).catch(err => alert(\"Insert failed\"));\n    } catch (error) {\n      alert(\"Insert failed\");\n      throw error;\n    }\n  }\n\n  function handleDelete(id) {\n    try {\n      console.log(\"delete \", id);\n\n      if (window.confirm(\"Delete a product\")) {\n        axios.delete(`http://127.0.0.1:8000/products/${id}/`).then(data => setProduct(product.filter(item => item.id !== id))).catch(err => alert(\"Please try again!\"));\n      }\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  async function handleUpdate(id) {\n    try {\n      setupdateProduct(product.filter(item => item.id === id).pop());\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  function UpdateService() {\n    try {\n      var itemUpdate = {\n        name: document.getElementById('upname').value,\n        img: document.getElementById('upimg').value,\n        price: document.getElementById('upprice').value\n      };\n      const checkInput = validateBody(ProductSchema, itemUpdate);\n\n      if (checkInput.status === \"fail\") {\n        alert(checkInput.message);\n        return;\n      }\n\n      console.log(itemUpdate);\n      document.getElementById(\"updateproduct\").reset();\n      axios.put(`http://127.0.0.1:8000/products/${updateProduct.id}/`, itemUpdate).then(data => {\n        itemUpdate.id = updateProduct.id; // const indexUpdate= product.findIndex(item => item.id ===updateProduct.id);\n        // var tempProduct = product;\n        // tempProduct[indexUpdate]=updateProduct;\n        // setProduct(tempProduct);\n        // console.log(indexUpdate);\n\n        const tempListProduct = [];\n        product.forEach(item => {\n          if (item.id === itemUpdate.id) tempListProduct.push(itemUpdate);else tempListProduct.push(item);\n        });\n        setProduct(tempListProduct);\n      }).catch(err => alert(\"Update failed\"));\n    } catch (error) {\n      alert(\"Update failed\");\n      throw error;\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Nav, {\n      page: \"products\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modalInsert\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-success btn-lg pull-right\",\n          \"data-toggle\": \"modal\",\n          \"data-target\": \"#myModal\",\n          children: \"Insert\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"myModal\",\n          className: \"modal fade\",\n          role: \"dialog\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-dialog\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"close\",\n                  \"data-dismiss\": \"modal\",\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"modal-title\",\n                  children: \"Insert Product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 15\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-body\",\n                children: /*#__PURE__*/_jsxDEV(\"form\", {\n                  action: \"#\",\n                  id: \"insertproduct\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"form-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      for: \"name\",\n                      children: \"Name:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 162,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      class: \"form-control\",\n                      name: \"name\",\n                      id: \"name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 163,\n                      columnNumber: 21\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"form-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      for: \"img\",\n                      children: \"Image:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 167,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      class: \"form-control\",\n                      name: \"img\",\n                      id: \"img\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 168,\n                      columnNumber: 21\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"form-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      for: \"price\",\n                      children: \"Price:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 171,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      class: \"form-control\",\n                      name: \"price\",\n                      id: \"price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 172,\n                      columnNumber: 21\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-footer\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-success\",\n                  \"data-dismiss\": \"modal\",\n                  onClick: insertProduct,\n                  children: \"Insert\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-default\",\n                  \"data-dismiss\": \"modal\",\n                  children: \"Close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 15\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }, this), \" \", /*#__PURE__*/_jsxDEV(UpdateModal, {\n        updateProduct: updateProduct,\n        UpdateService: UpdateService\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(ListProduct, {\n        listrecord: product,\n        handleDelete: handleDelete,\n        handleUpdate: handleUpdate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-8\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          class: \"pagination \",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"#\",\n              children: \"<\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"#\",\n              children: \"1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"#\",\n              children: \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"#\",\n              children: \"3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"#\",\n              children: \"4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"#\",\n              children: \">\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Products, \"+E4ituYEuwaAwXpuWCg/+zOmpno=\");\n\n_c = Products;\nexport default Products;\n\nvar _c;\n\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"sources":["D:/BKU/211/DCLV_v1/demo_lv_django_reactjs/fontend/views/src/modules/product/product.js"],"names":["Nav","axios","useEffect","useState","validateBody","ProductSchema","ListProduct","UpdateModal","Products","id_delete","id_update","product","setProduct","updateProduct","setupdateProduct","get","then","res","data","catch","err","console","log","insertProduct","inputProduct","name","document","getElementById","value","img","price","checkInput","status","alert","message","post","reset","idproduct","length","id","error","handleDelete","window","confirm","delete","filter","item","handleUpdate","pop","UpdateService","itemUpdate","put","tempListProduct","forEach","push"],"mappings":"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","sourcesContent":["import Nav from '../../component/nav';\r\nimport '../../component/css/product.css';\r\nimport axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport { validateBody } from '../../middleware/validateBody.middleware';\r\nimport {ProductSchema} from '../../DTO/product.dto';\r\nimport ListProduct from './ListProduct';\r\nimport UpdateModal from './UpdateModal';\r\n\r\nfunction Products() {\r\n\r\n  var id_delete=-1;\r\n  var id_update=-1;\r\n  // const [List_product, setListProduct] = useState([]);\r\n\r\n  const [product,setProduct]= useState([]);\r\n\r\n  const [updateProduct,setupdateProduct]= useState({});\r\n\r\n  useEffect(()=> {\r\n    axios.get('http://127.0.0.1:8000/products/')\r\n      .then(res => {\r\n        setProduct(res.data);\r\n      \r\n      })\r\n      .catch(err => console.log(err));\r\n\r\n  },[]);\r\n\r\n  // window.onload = function() {\r\n  //   loadRecord();\r\n  // };\r\n\r\n  function insertProduct(){\r\n    try {\r\n      const inputProduct = {\r\n        name: document.getElementById('name').value,\r\n        img: document.getElementById('img').value,\r\n        price: document.getElementById('price').value,\r\n      };\r\n     \r\n      const checkInput = validateBody(ProductSchema, inputProduct);\r\n      if (checkInput.status === \"fail\") {\r\n        alert(checkInput.message);\r\n        return;\r\n      }\r\n      \r\n      \r\n      axios.post('http://127.0.0.1:8000/products/', inputProduct)\r\n          .then(data => {\r\n            document.getElementById(\"insertproduct\").reset();\r\n            const idproduct= product.length +1;\r\n            setProduct( [...product, {id: idproduct, ...inputProduct}]);\r\n            alert(\"Insert successfullly\");\r\n          })\r\n          .catch(err => alert(\"Insert failed\"));\r\n      \r\n      \r\n    } catch (error) {\r\n      alert(\"Insert failed\");\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  function handleDelete(id){\r\n    try {\r\n      console.log(\"delete \", id);\r\n      if (window.confirm(\"Delete a product\"))\r\n      {\r\n        \r\n        axios.delete(`http://127.0.0.1:8000/products/${id}/`)\r\n        .then(data => setProduct( product.filter(item => item.id !== id)))\r\n        .catch(err => alert(\"Please try again!\"));\r\n      }\r\n        \r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n    \r\n    \r\n  }\r\n\r\n  \r\n  async function handleUpdate(id){\r\n    try {\r\n      \r\n      setupdateProduct((product.filter(item => item.id === id)).pop());\r\n      \r\n    } catch (error) {\r\n      \r\n      throw error;\r\n    }\r\n    \r\n  }\r\n\r\n  function UpdateService(){\r\n    try {\r\n      var itemUpdate = {\r\n        name: document.getElementById('upname').value,\r\n        img: document.getElementById('upimg').value,\r\n        price: document.getElementById('upprice').value,\r\n      };\r\n     \r\n      const checkInput = validateBody(ProductSchema, itemUpdate);\r\n      if (checkInput.status === \"fail\") {\r\n        alert(checkInput.message);\r\n        return;\r\n      }\r\n\r\n      console.log(itemUpdate);\r\n      document.getElementById(\"updateproduct\").reset();\r\n      axios.put(`http://127.0.0.1:8000/products/${updateProduct.id}/`, itemUpdate)\r\n          .then(data => {\r\n            itemUpdate.id= updateProduct.id;\r\n\r\n            // const indexUpdate= product.findIndex(item => item.id ===updateProduct.id);\r\n            // var tempProduct = product;\r\n            // tempProduct[indexUpdate]=updateProduct;\r\n            // setProduct(tempProduct);\r\n            // console.log(indexUpdate);\r\n\r\n            const tempListProduct=[];\r\n            product.forEach((item)=> {\r\n              if (item.id===itemUpdate.id) \r\n                 tempListProduct.push(itemUpdate);\r\n              else tempListProduct.push(item);\r\n            });\r\n            setProduct(tempListProduct);\r\n            \r\n          })\r\n          .catch(err => alert(\"Update failed\"));\r\n    } catch (error) {\r\n      alert(\"Update failed\");\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div >\r\n    <Nav page=\"products\"/>\r\n    \r\n    <div className=\"body\">\r\n\r\n      {/*Modal*/ }\r\n      <div className=\"modalInsert\">\r\n\r\n      <button type=\"button\" className=\"btn btn-success btn-lg pull-right\" data-toggle=\"modal\" data-target=\"#myModal\">Insert</button>\r\n      \r\n          \r\n      <div id=\"myModal\" className=\"modal fade\" role=\"dialog\">\r\n      <div className=\"modal-dialog\">\r\n\r\n        \r\n          <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n              <button type=\"button\" className=\"close\" data-dismiss=\"modal\">&times;</button>\r\n              <h4 className=\"modal-title\">Insert Product</h4>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n                <form action=\"#\" id=\"insertproduct\">\r\n                  <div class=\"form-group\">\r\n                    <label for=\"name\">Name:</label>\r\n                    <input type=\"text\" class=\"form-control\" name=\"name\" id=\"name\"/>\r\n                  </div>\r\n\r\n                  <div class=\"form-group\">\r\n                    <label for=\"img\">Image:</label>\r\n                    <input type=\"text\" class=\"form-control\" name=\"img\" id=\"img\"/>\r\n                  </div>\r\n                  <div class=\"form-group\">\r\n                    <label for=\"price\">Price:</label>\r\n                    <input type=\"number\" class=\"form-control\" name=\"price\" id=\"price\"/>\r\n                  </div>\r\n                </form>\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" className=\"btn btn-success\" data-dismiss=\"modal\" onClick={insertProduct}>Insert</button>\r\n              <button type=\"button\" className=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\r\n          </div>\r\n          </div>\r\n\r\n      </div>\r\n      </div>\r\n\r\n      </div> {/*Modal End*/}\r\n\r\n      {/*Modal Update*/}\r\n     \r\n      <UpdateModal updateProduct={updateProduct} UpdateService={UpdateService}/>\r\n      <ListProduct listrecord= {product} handleDelete={handleDelete} handleUpdate={handleUpdate}/>\r\n      <div className=\"col-sm-8\">\r\n      <ul class=\"pagination \">\r\n        <li><a href=\"#\">&lt;</a></li>\r\n        <li><a href=\"#\">1</a></li>\r\n        <li><a href=\"#\">2</a></li>\r\n        <li><a href=\"#\">3</a></li>\r\n        <li><a href=\"#\">4</a></li>\r\n        <li><a href=\"#\">&gt;</a></li>\r\n      </ul>\r\n      </div>\r\n      \r\n\r\n      \r\n    </div>\r\n\r\n\r\n    </div>\r\n  \r\n  );\r\n}\r\n\r\nexport default Products;\r\n"]},"metadata":{},"sourceType":"module"}